
> forummed-backend-recreated@1.0.0 test
> jest

FAIL src/tests/integration/services/firebaseUserStatisticsService.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/integration/services/firebaseUserStatisticsService.integration.test.ts[0m:[93m4[0m:[93m5[0m - [91merror[0m[90m TS2305: [0mModule '"../../../types/firebaseTypes"' has no exported member 'FirebaseUserStatistics'.

    [7m4[0m     FirebaseUserStatistics,
    [7m [0m [91m    ~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseUserStatisticsService.integration.test.ts[0m:[93m5[0m:[93m5[0m - [91merror[0m[90m TS2305: [0mModule '"../../../types/firebaseTypes"' has no exported member 'FirebaseUserStatisticsUpdatePayload'.

    [7m5[0m     FirebaseUserStatisticsUpdatePayload,
    [7m [0m [91m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

FAIL src/tests/integration/services/firebaseQuestionService.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/integration/services/firebaseQuestionService.integration.test.ts[0m:[93m1[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../../../types/firebaseTypes"' has no exported member 'FirebaseQuestion'.

    [7m1[0m import { FirebaseQuestion, FirebaseQuestionStatus, FirebaseQuestionDifficulty, FirebaseQuestionAlternative } from "../../../types/firebaseTypes";
    [7m [0m [91m         ~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseQuestionService.integration.test.ts[0m:[93m1[0m:[93m80[0m - [91merror[0m[90m TS2305: [0mModule '"../../../types/firebaseTypes"' has no exported member 'FirebaseQuestionAlternative'.

    [7m1[0m import { FirebaseQuestion, FirebaseQuestionStatus, FirebaseQuestionDifficulty, FirebaseQuestionAlternative } from "../../../types/firebaseTypes";
    [7m [0m [91m                                                                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseQuestionService.integration.test.ts[0m:[93m87[0m:[93m38[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m87[0m     newQuestion.alternatives.forEach(alt => {
    [7m  [0m [91m                                     ~~~[0m
    [96msrc/tests/integration/services/firebaseQuestionService.integration.test.ts[0m:[93m110[0m:[93m43[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m110[0m     fetchedQuestion!.alternatives.forEach(alt => expect(alt.id).toBeDefined());
    [7m   [0m [91m                                          ~~~[0m
    [96msrc/tests/integration/services/firebaseQuestionService.integration.test.ts[0m:[93m141[0m:[93m43[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m141[0m     updatedQuestion!.alternatives.forEach(alt => {
    [7m   [0m [91m                                          ~~~[0m

FAIL src/tests/controllers/payment/paymentController.test.ts
  ‚óè Test suite failed to run

    [96msrc/controllers/payment/paymentController.ts[0m:[93m128[0m:[93m69[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ paymentId: string; pixQrCode: string; pixCopiaECola: string; status: FirebasePaymentStatus; expirationDate: Timestamp; }' is not assignable to parameter of type 'Omit<FirebasePixPayment, "id" | "createdAt" | "updatedAt">'.
      Types of property 'status' are incompatible.
        Type 'FirebasePaymentStatus' is not assignable to type 'FirebasePixStatus'.

    [7m128[0m         const pixPayment = await pixPaymentService.createPixPayment(pixData);
    [7m   [0m [91m                                                                    ~~~~~~~[0m
    [96msrc/controllers/payment/paymentController.ts[0m:[93m155[0m:[93m82[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ paymentId: string; cardHolderName: any; cardLastFourDigits: any; cardBrand: any; installments: any; status: FirebasePaymentStatus; paymentMethodId: any; }' is not assignable to parameter of type 'Omit<FirebaseCreditCardPayment, "id" | "createdAt" | "updatedAt">'.
      Types of property 'status' are incompatible.
        Type 'FirebasePaymentStatus' is not assignable to type 'FirebaseCreditCardPaymentStatus'.

    [7m155[0m         const ccPayment = await creditCardPaymentService.createCreditCardPayment(creditCardData);
    [7m   [0m [91m                                                                                 ~~~~~~~~~~~~~~[0m
    [96msrc/controllers/payment/paymentController.ts[0m:[93m302[0m:[93m24[0m - [91merror[0m[90m TS2339: [0mProperty 'payments' does not exist on type 'FirebasePayment[]'.

    [7m302[0m         data: snapshot.payments, // Access the payments array from the snapshot object
    [7m   [0m [91m                       ~~~~~~~~[0m
    [96msrc/controllers/payment/paymentController.ts[0m:[93m304[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'nextPageStartAfter' does not exist on type 'FirebasePayment[]'.

    [7m304[0m             nextPageStartAfter: snapshot.nextPageStartAfter
    [7m   [0m [91m                                         ~~~~~~~~~~~~~~~~~~[0m
    [96msrc/controllers/payment/paymentController.ts[0m:[93m509[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'activateUserPlanAfterPayment' does not exist on type 'typeof import("/home/ubuntu/MEDFORUM_project/src/services/firebaseUserPlanService")'.

    [7m509[0m           await userPlanService.activateUserPlanAfterPayment(payment.id);
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/controllers/payment/paymentController.ts[0m:[93m554[0m:[93m36[0m - [91merror[0m[90m TS2339: [0mProperty 'payments' does not exist on type 'FirebasePayment[]'.

    [7m554[0m         totalPayments: allPayments.payments.length,
    [7m   [0m [91m                                   ~~~~~~~~[0m
    [96msrc/controllers/payment/paymentController.ts[0m:[93m564[0m:[93m19[0m - [91merror[0m[90m TS2339: [0mProperty 'payments' does not exist on type 'FirebasePayment[]'.

    [7m564[0m       allPayments.payments.forEach((p: FirebasePaymentType) => {
    [7m   [0m [91m                  ~~~~~~~~[0m

FAIL src/tests/integration/services/firebaseSimulatedExamService.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/integration/services/firebaseSimulatedExamService.integration.test.ts[0m:[93m7[0m:[93m10[0m - [91merror[0m[90m TS2724: [0m'"../../../types/firebaseTypes"' has no exported member named 'FirebaseSimulatedExam'. Did you mean 'FirebaseSimulatedExamStatus'?

    [7m7[0m import { FirebaseSimulatedExam, FirebaseSimulatedExamStatus } from "../../../types/firebaseTypes";
    [7m [0m [91m         ~~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m350[0m:[93m13[0m
        [7m350[0m export enum FirebaseSimulatedExamStatus {
        [7m   [0m [96m            ~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        'FirebaseSimulatedExamStatus' is declared here.

FAIL src/tests/integration/services/firebaseQuestionListService.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/integration/services/firebaseQuestionListService.integration.test.ts[0m:[93m6[0m:[93m3[0m - [91merror[0m[90m TS2724: [0m'"../../../types/firebaseTypes"' has no exported member named 'FirebaseQuestionList'. Did you mean 'FirebaseQuestionListStatus'?

    [7m6[0m   FirebaseQuestionList,
    [7m [0m [91m  ~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m345[0m:[93m13[0m
        [7m345[0m export enum FirebaseQuestionListStatus {
        [7m   [0m [96m            ~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        'FirebaseQuestionListStatus' is declared here.
    [96msrc/tests/integration/services/firebaseQuestionListService.integration.test.ts[0m:[93m7[0m:[93m3[0m - [91merror[0m[90m TS2724: [0m'"../../../types/firebaseTypes"' has no exported member named 'FirebaseQuestionListItem'. Did you mean 'FirebaseQuestionListStatus'?

    [7m7[0m   FirebaseQuestionListItem,
    [7m [0m [91m  ~~~~~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m345[0m:[93m13[0m
        [7m345[0m export enum FirebaseQuestionListStatus {
        [7m   [0m [96m            ~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        'FirebaseQuestionListStatus' is declared here.
    [96msrc/tests/integration/services/firebaseQuestionListService.integration.test.ts[0m:[93m10[0m:[93m3[0m - [91merror[0m[90m TS2305: [0mModule '"../../../types/firebaseTypes"' has no exported member 'FirebaseQuestionListUpdatePayload'.

    [7m10[0m   FirebaseQuestionListUpdatePayload // Ensure this is correctly defined or imported if used
    [7m  [0m [91m  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

FAIL src/tests/integration/services/firebasePaymentService.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/services/firebasePaymentService.ts[0m:[93m1[0m:[93m27[0m - [91merror[0m[90m TS2724: [0m'"../config/firebaseAdmin"' has no exported member named 'firestoreDb'. Did you mean 'firestore'?

    [7m1[0m import { firestore as db, firestoreDb } from "../config/firebaseAdmin";
    [7m [0m [91m                          ~~~~~~~~~~~[0m
    [96msrc/services/firebasePaymentService.ts[0m:[93m135[0m:[93m68[0m - [91merror[0m[90m TS7006: [0mParameter 'transaction' implicitly has an 'any' type.

    [7m135[0m     const updatedPayment = await firestoreDb.runTransaction(async (transaction) => {
    [7m   [0m [91m                                                                   ~~~~~~~~~~~[0m
    [96msrc/services/firebasePaymentService.ts[0m:[93m171[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'durationDays' does not exist on type 'FirebasePlan'.

    [7m171[0m       const planDurationDays = planDetails.durationDays ?? 30;
    [7m   [0m [91m                                           ~~~~~~~~~~~~[0m
    [96msrc/services/firebasePaymentService.ts[0m:[93m184[0m:[93m34[0m - [91merror[0m[90m TS2551: [0mProperty 'paymentMethodType' does not exist on type 'FirebasePayment'. Did you mean 'paymentMethod'?

    [7m184[0m           paymentMethod: payment.paymentMethodType,
    [7m   [0m [91m                                 ~~~~~~~~~~~~~~~~~[0m

      [96msrc/types/firebasePaymentTypes.ts[0m:[93m64[0m:[93m3[0m
        [7m64[0m   paymentMethod: FirebasePaymentMethod;
        [7m  [0m [96m  ~~~~~~~~~~~~~[0m
        'paymentMethod' is declared here.
    [96msrc/services/firebasePaymentService.ts[0m:[93m205[0m:[93m34[0m - [91merror[0m[90m TS2551: [0mProperty 'paymentMethodType' does not exist on type 'FirebasePayment'. Did you mean 'paymentMethod'?

    [7m205[0m           paymentMethod: payment.paymentMethodType as FirebasePaymentMethodType | FirebasePaymentMethod,
    [7m   [0m [91m                                 ~~~~~~~~~~~~~~~~~[0m

      [96msrc/types/firebasePaymentTypes.ts[0m:[93m64[0m:[93m3[0m
        [7m64[0m   paymentMethod: FirebasePaymentMethod;
        [7m  [0m [96m  ~~~~~~~~~~~~~[0m
        'paymentMethod' is declared here.
    [96msrc/services/firebasePaymentService.ts[0m:[93m274[0m:[93m68[0m - [91merror[0m[90m TS7006: [0mParameter 'transaction' implicitly has an 'any' type.

    [7m274[0m     const updatedPayment = await firestoreDb.runTransaction(async (transaction) => {
    [7m   [0m [91m                                                                   ~~~~~~~~~~~[0m
    [96msrc/services/firebasePaymentService.ts[0m:[93m386[0m:[93m68[0m - [91merror[0m[90m TS7006: [0mParameter 'transaction' implicitly has an 'any' type.

    [7m386[0m     const updatedPayment = await firestoreDb.runTransaction(async (transaction) => {
    [7m   [0m [91m                                                                   ~~~~~~~~~~~[0m

(node:3162) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
FAIL src/tests/integration/services/firebaseFlashcardService.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m90[0m:[93m17[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m90[0m                 status: FirebaseProgrammedReviewStatus.LEARNING // Using correct enum for flashcard status
    [7m  [0m [91m                ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m99[0m:[93m30[0m - [91merror[0m[90m TS2339: [0mProperty 'frontContent' does not exist on type 'FirebaseFlashcard'.

    [7m99[0m             expect(flashcard.frontContent).toBe("Test Front"); // Corrected from front
    [7m  [0m [91m                             ~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m103[0m:[93m30[0m - [91merror[0m[90m TS2339: [0mProperty 'intervalDays' does not exist on type 'FirebaseFlashcard'.

    [7m103[0m             expect(flashcard.intervalDays).toBe(0);
    [7m   [0m [91m                             ~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m104[0m:[93m30[0m - [91merror[0m[90m TS2551: [0mProperty 'easeFactor' does not exist on type 'FirebaseFlashcard'. Did you mean 'srsEaseFactor'?

    [7m104[0m             expect(flashcard.easeFactor).toBe(2.5);
    [7m   [0m [91m                             ~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m107[0m:[93m3[0m
        [7m107[0m   srsEaseFactor?: number;
        [7m   [0m [96m  ~~~~~~~~~~~~~[0m
        'srsEaseFactor' is declared here.
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m105[0m:[93m30[0m - [91merror[0m[90m TS2551: [0mProperty 'repetitions' does not exist on type 'FirebaseFlashcard'. Did you mean 'srsRepetitions'?

    [7m105[0m             expect(flashcard.repetitions).toBe(0); // Corrected from reviewsCount
    [7m   [0m [91m                             ~~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m108[0m:[93m3[0m
        [7m108[0m   srsRepetitions?: number;
        [7m   [0m [96m  ~~~~~~~~~~~~~~[0m
        'srsRepetitions' is declared here.
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m106[0m:[93m30[0m - [91merror[0m[90m TS2339: [0mProperty 'lapses' does not exist on type 'FirebaseFlashcard'.

    [7m106[0m             expect(flashcard.lapses).toBe(0);      // Corrected from lapsesCount
    [7m   [0m [91m                             ~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m120[0m:[93m142[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m120[0m             const payload: FirebaseFlashcardCreatePayload = { userId: testUserId, deckId: testDeckId, frontContent: "F1", backContent: "B1", status: FirebaseProgrammedReviewStatus.LEARNING };
    [7m   [0m [91m                                                                                                                                             ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m129[0m:[93m157[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m129[0m             const flashcard = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "Q", backContent: "A", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                            ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m135[0m:[93m37[0m - [91merror[0m[90m TS2551: [0mProperty 'repetitions' does not exist on type 'FirebaseFlashcard'. Did you mean 'srsRepetitions'?

    [7m135[0m             expect(updatedFlashcard.repetitions).toBe(1); // Corrected from reviewsCount
    [7m   [0m [91m                                    ~~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m108[0m:[93m3[0m
        [7m108[0m   srsRepetitions?: number;
        [7m   [0m [96m  ~~~~~~~~~~~~~~[0m
        'srsRepetitions' is declared here.
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m136[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'lapses' does not exist on type 'FirebaseFlashcard'.

    [7m136[0m             expect(updatedFlashcard.lapses).toBe(0);      // Corrected from lapsesCount
    [7m   [0m [91m                                    ~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m137[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'intervalDays' does not exist on type 'FirebaseFlashcard'.

    [7m137[0m             expect(updatedFlashcard.intervalDays).toBe(1);
    [7m   [0m [91m                                    ~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m138[0m:[93m37[0m - [91merror[0m[90m TS2551: [0mProperty 'easeFactor' does not exist on type 'FirebaseFlashcard'. Did you mean 'srsEaseFactor'?

    [7m138[0m             expect(updatedFlashcard.easeFactor).toBeCloseTo(2.5 + (0.1 - (5 - reviewQuality) * (0.08 + (5 - reviewQuality) * 0.02)), 5); // Using 5 as max quality for formula
    [7m   [0m [91m                                    ~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m107[0m:[93m3[0m
        [7m107[0m   srsEaseFactor?: number;
        [7m   [0m [96m  ~~~~~~~~~~~~~[0m
        'srsEaseFactor' is declared here.
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m152[0m:[93m157[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m152[0m             let flashcard = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "Q2", backContent: "A2", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                            ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m159[0m:[93m44[0m - [91merror[0m[90m TS2551: [0mProperty 'repetitions' does not exist on type 'FirebaseFlashcard'. Did you mean 'srsRepetitions'?

    [7m159[0m             expect(flashcardAfterBadReview.repetitions).toBe(2); // Corrected from reviewsCount
    [7m   [0m [91m                                           ~~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m108[0m:[93m3[0m
        [7m108[0m   srsRepetitions?: number;
        [7m   [0m [96m  ~~~~~~~~~~~~~~[0m
        'srsRepetitions' is declared here.
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m160[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'lapses' does not exist on type 'FirebaseFlashcard'.

    [7m160[0m             expect(flashcardAfterBadReview.lapses).toBe(1);      // Corrected from lapsesCount
    [7m   [0m [91m                                           ~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m161[0m:[93m44[0m - [91merror[0m[90m TS2339: [0mProperty 'intervalDays' does not exist on type 'FirebaseFlashcard'.

    [7m161[0m             expect(flashcardAfterBadReview.intervalDays).toBe(0);
    [7m   [0m [91m                                           ~~~~~~~~~~~~[0m
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m162[0m:[93m44[0m - [91merror[0m[90m TS2551: [0mProperty 'easeFactor' does not exist on type 'FirebaseFlashcard'. Did you mean 'srsEaseFactor'?

    [7m162[0m             expect(flashcardAfterBadReview.easeFactor).toBeLessThan(2.5);
    [7m   [0m [91m                                           ~~~~~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m107[0m:[93m3[0m
        [7m107[0m   srsEaseFactor?: number;
        [7m   [0m [96m  ~~~~~~~~~~~~~[0m
        'srsEaseFactor' is declared here.
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m168[0m:[93m164[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m168[0m             const dueFlashcard = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "Due", backContent: "Now", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                                   ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m171[0m:[93m165[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m171[0m             const notDueFlashcardPayload: FirebaseFlashcardCreatePayload = { userId: testUserId, deckId: testDeckId, frontContent: "Not Due", backContent: "Later", status: FirebaseProgrammedReviewStatus.LEARNING };
    [7m   [0m [91m                                                                                                                                                                    ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m184[0m:[93m173[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m184[0m             const flashcard = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "To Archive", backContent: "Archived", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                                            ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m193[0m:[93m175[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m193[0m             let flashcard = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "To Unarchive", backContent: "Unarchived", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                                              ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m206[0m:[93m154[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m206[0m             const fc1 = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "FC1", backContent: "B1", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                         ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m209[0m:[93m154[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m209[0m             const fc2 = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "FC2", backContent: "B2", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                         ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m212[0m:[93m154[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m212[0m             const fc3 = await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: testDeckId, frontContent: "FC3", backContent: "B3", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                                         ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'
    [96msrc/tests/integration/services/firebaseFlashcardService.integration.test.ts[0m:[93m217[0m:[93m143[0m - [91merror[0m[90m TS2322: [0mType 'FirebaseProgrammedReviewStatus.LEARNING' is not assignable to type 'FirebaseFlashcardStatus'.

    [7m217[0m             await firebaseFlashcardService.createFlashcard({ userId: testUserId, deckId: otherDeckId, frontContent: "FC4", backContent: "B4", status: FirebaseProgrammedReviewStatus.LEARNING });
    [7m   [0m [91m                                                                                                                                              ~~~~~~[0m

      [96msrc/types/firebaseTypes.ts[0m:[93m103[0m:[93m3[0m
        [7m103[0m   status: FirebaseFlashcardStatus; // ACTIVE, INACTIVE, ARCHIVED, LEARNING, REVIEWING, MASTERED, SUSPENDED
        [7m   [0m [96m  ~~~~~~[0m
        The expected type comes from property 'status' which is declared here on type 'FirebaseFlashcardCreatePayload'

FAIL src/tests/controllers/searchController.test.ts
  ‚óè Test suite failed to run

    [96msrc/controllers/search/searchController.ts[0m:[93m3[0m:[93m8[0m - [91merror[0m[90m TS2613: [0mModule '"/home/ubuntu/MEDFORUM_project/src/utils/logger"' has no default export. Did you mean to use 'import { logger } from "/home/ubuntu/MEDFORUM_project/src/utils/logger"' instead?

    [7m3[0m import logger from "../../utils/logger";
    [7m [0m [91m       ~~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m51[0m:[93m16[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 1.

    [7m51[0m           this.searchUsers({ query: searchTerm, page: pageNum, limit: limitNum })
    [7m  [0m [91m               ~~~~~~~~~~~[0m

      [96msrc/utils/errors.ts[0m:[93m78[0m:[93m25[0m
        [7m78[0m   return (req: Request, res: Response, next: NextFunction) => {
        [7m  [0m [96m                        ~~~~~~~~~~~~~[0m
        An argument for 'res' was not provided.
    [96msrc/controllers/search/searchController.ts[0m:[93m52[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'then' does not exist on type 'void'.

    [7m52[0m             .then(data => { results.users = data; })
    [7m  [0m [91m             ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m52[0m:[93m19[0m - [91merror[0m[90m TS7006: [0mParameter 'data' implicitly has an 'any' type.

    [7m52[0m             .then(data => { results.users = data; })
    [7m  [0m [91m                  ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m59[0m:[93m16[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 1.

    [7m59[0m           this.searchDecks({ query: searchTerm, page: pageNum, limit: limitNum })
    [7m  [0m [91m               ~~~~~~~~~~~[0m

      [96msrc/utils/errors.ts[0m:[93m78[0m:[93m25[0m
        [7m78[0m   return (req: Request, res: Response, next: NextFunction) => {
        [7m  [0m [96m                        ~~~~~~~~~~~~~[0m
        An argument for 'res' was not provided.
    [96msrc/controllers/search/searchController.ts[0m:[93m60[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'then' does not exist on type 'void'.

    [7m60[0m             .then(data => { results.decks = data; })
    [7m  [0m [91m             ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m60[0m:[93m19[0m - [91merror[0m[90m TS7006: [0mParameter 'data' implicitly has an 'any' type.

    [7m60[0m             .then(data => { results.decks = data; })
    [7m  [0m [91m                  ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m67[0m:[93m16[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 1.

    [7m67[0m           this.searchArticles({ query: searchTerm, page: pageNum, limit: limitNum })
    [7m  [0m [91m               ~~~~~~~~~~~~~~[0m

      [96msrc/utils/errors.ts[0m:[93m78[0m:[93m25[0m
        [7m78[0m   return (req: Request, res: Response, next: NextFunction) => {
        [7m  [0m [96m                        ~~~~~~~~~~~~~[0m
        An argument for 'res' was not provided.
    [96msrc/controllers/search/searchController.ts[0m:[93m68[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'then' does not exist on type 'void'.

    [7m68[0m             .then(data => { results.articles = data; })
    [7m  [0m [91m             ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m68[0m:[93m19[0m - [91merror[0m[90m TS7006: [0mParameter 'data' implicitly has an 'any' type.

    [7m68[0m             .then(data => { results.articles = data; })
    [7m  [0m [91m                  ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m75[0m:[93m16[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 1.

    [7m75[0m           this.searchQuestions({ query: searchTerm, page: pageNum, limit: limitNum })
    [7m  [0m [91m               ~~~~~~~~~~~~~~~[0m

      [96msrc/utils/errors.ts[0m:[93m78[0m:[93m25[0m
        [7m78[0m   return (req: Request, res: Response, next: NextFunction) => {
        [7m  [0m [96m                        ~~~~~~~~~~~~~[0m
        An argument for 'res' was not provided.
    [96msrc/controllers/search/searchController.ts[0m:[93m76[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'then' does not exist on type 'void'.

    [7m76[0m             .then(data => { results.questions = data; })
    [7m  [0m [91m             ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m76[0m:[93m19[0m - [91merror[0m[90m TS7006: [0mParameter 'data' implicitly has an 'any' type.

    [7m76[0m             .then(data => { results.questions = data; })
    [7m  [0m [91m                  ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m83[0m:[93m16[0m - [91merror[0m[90m TS2554: [0mExpected 3 arguments, but got 1.

    [7m83[0m           this.searchMentorships({ query: searchTerm, page: pageNum, limit: limitNum })
    [7m  [0m [91m               ~~~~~~~~~~~~~~~~~[0m

      [96msrc/utils/errors.ts[0m:[93m78[0m:[93m25[0m
        [7m78[0m   return (req: Request, res: Response, next: NextFunction) => {
        [7m  [0m [96m                        ~~~~~~~~~~~~~[0m
        An argument for 'res' was not provided.
    [96msrc/controllers/search/searchController.ts[0m:[93m84[0m:[93m14[0m - [91merror[0m[90m TS2339: [0mProperty 'then' does not exist on type 'void'.

    [7m84[0m             .then(data => { results.mentorships = data; })
    [7m  [0m [91m             ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m84[0m:[93m19[0m - [91merror[0m[90m TS7006: [0mParameter 'data' implicitly has an 'any' type.

    [7m84[0m             .then(data => { results.mentorships = data; })
    [7m  [0m [91m                  ~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m169[0m:[93m11[0m - [91merror[0m[90m TS7034: [0mVariable 'users' implicitly has type 'any[]' in some locations where its type cannot be determined.

    [7m169[0m     const users = [];
    [7m   [0m [91m          ~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m206[0m:[93m14[0m - [91merror[0m[90m TS7005: [0mVariable 'users' implicitly has an 'any[]' type.

    [7m206[0m       items: users,
    [7m   [0m [91m             ~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m262[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Query<DocumentData>' is missing the following properties from type 'CollectionReference<DocumentData>': id, parent, path, listDocuments, and 2 more.

    [7m262[0m       decksQuery = decksQuery.where('isPublic', '==', isPublic);
    [7m   [0m [91m      ~~~~~~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m266[0m:[93m5[0m - [91merror[0m[90m TS2740: [0mType 'Query<DocumentData>' is missing the following properties from type 'CollectionReference<DocumentData>': id, parent, path, listDocuments, and 2 more.

    [7m266[0m     decksQuery = decksQuery
    [7m   [0m [91m    ~~~~~~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m289[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Query<DocumentData>' is missing the following properties from type 'CollectionReference<DocumentData>': id, parent, path, listDocuments, and 2 more.

    [7m289[0m       countQuery = countQuery.where('isPublic', '==', isPublic);
    [7m   [0m [91m      ~~~~~~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m552[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Query<DocumentData>' is missing the following properties from type 'CollectionReference<DocumentData>': id, parent, path, listDocuments, and 2 more.

    [7m552[0m       mentorshipsQuery = mentorshipsQuery.where('status', '==', status);
    [7m   [0m [91m      ~~~~~~~~~~~~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m556[0m:[93m5[0m - [91merror[0m[90m TS2740: [0mType 'Query<DocumentData>' is missing the following properties from type 'CollectionReference<DocumentData>': id, parent, path, listDocuments, and 2 more.

    [7m556[0m     mentorshipsQuery = mentorshipsQuery
    [7m   [0m [91m    ~~~~~~~~~~~~~~~~[0m
    [96msrc/controllers/search/searchController.ts[0m:[93m583[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Query<DocumentData>' is missing the following properties from type 'CollectionReference<DocumentData>': id, parent, path, listDocuments, and 2 more.

    [7m583[0m       countQuery = countQuery.where('status', '==', status);
    [7m   [0m [91m      ~~~~~~~~~~[0m

FAIL src/tests/controllers/questionController.test.ts
  ‚óè Test suite failed to run

    [96msrc/controllers/question/questionController.ts[0m:[93m5[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../../types/firebaseTypes"' has no exported member 'FirebaseQuestion'.

    [7m5[0m import { FirebaseQuestion, FirebaseQuestionDifficulty, FirebaseQuestionStatus, UserRole, FirebaseReviewStatus, FirebaseQuestionAlternative } from "../../types/firebaseTypes";
    [7m [0m [91m         ~~~~~~~~~~~~~~~~[0m
    [96msrc/controllers/question/questionController.ts[0m:[93m5[0m:[93m112[0m - [91merror[0m[90m TS2305: [0mModule '"../../types/firebaseTypes"' has no exported member 'FirebaseQuestionAlternative'.

    [7m5[0m import { FirebaseQuestion, FirebaseQuestionDifficulty, FirebaseQuestionStatus, UserRole, FirebaseReviewStatus, FirebaseQuestionAlternative } from "../../types/firebaseTypes";
    [7m [0m [91m                                                                                                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/controllers/question/questionController.ts[0m:[93m55[0m:[93m66[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m55[0m     const hasCorrectAlternative = questionData.alternatives.some(alt => alt.isCorrect);
    [7m  [0m [91m                                                                 ~~~[0m
    [96msrc/controllers/question/questionController.ts[0m:[93m62[0m:[93m71[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m62[0m     const alternativesWithIds = (questionData.alternatives || []).map(alt => ({
    [7m  [0m [91m                                                                      ~~~[0m
    [96msrc/controllers/question/questionController.ts[0m:[93m504[0m:[93m27[0m - [91merror[0m[90m TS2304: [0mCannot find name 'FieldValue'.

    [7m504[0m             alternatives: FieldValue.arrayUnion(newAlternative),
    [7m   [0m [91m                          ~~~~~~~~~~[0m
    [96msrc/controllers/question/questionController.ts[0m:[93m556[0m:[93m57[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m556[0m         const alternativeIndex = alternatives.findIndex(alt => alt.id === alternativeId);
    [7m   [0m [91m                                                        ~~~[0m
    [96msrc/controllers/question/questionController.ts[0m:[93m616[0m:[93m57[0m - [91merror[0m[90m TS7006: [0mParameter 'alt' implicitly has an 'any' type.

    [7m616[0m         const updatedAlternatives = alternatives.filter(alt => alt.id !== alternativeId);
    [7m   [0m [91m                                                        ~~~[0m

FAIL src/tests/utils/pdf/invoiceGenerator.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/utils/pdf/invoiceGenerator.test.ts[0m:[93m75[0m:[93m11[0m - [91merror[0m[90m TS2739: [0mType '{ id: string; userId: string; planId: string; amount: number; status: FirebasePaymentStatus.APPROVED; paymentMethod: FirebasePaymentMethod.CREDIT_CARD; description: string; paidAt: Timestamp; createdAt: Timestamp; updatedAt: Timestamp; }' is missing the following properties from type 'FirebasePayment': originalAmount, discountAmount, currency

    [7m75[0m     const mockPayment: FirebasePayment = {
    [7m  [0m [91m          ~~~~~~~~~~~[0m

FAIL src/__tests__/integration/health.test.ts
  ‚óè Test suite failed to run

    [96msrc/controllers/articleController.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../types/firebaseTypes"' has no exported member 'FirebaseArticle'.

    [7m3[0m import { FirebaseArticle, FirebaseArticleStatus } from "../types/firebaseTypes";
    [7m [0m [91m         ~~~~~~~~~~~~~~~[0m

FAIL src/tests/integration/payment.routes.test.ts
  ‚óè Test suite failed to run

    [96msrc/controllers/articleController.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../types/firebaseTypes"' has no exported member 'FirebaseArticle'.

    [7m3[0m import { FirebaseArticle, FirebaseArticleStatus } from "../types/firebaseTypes";
    [7m [0m [91m         ~~~~~~~~~~~~~~~[0m

FAIL src/tests/services/firebaseInvoiceService.test.ts
  ‚óè Test suite failed to run

    [96msrc/tests/services/firebaseInvoiceService.test.ts[0m:[93m5[0m:[93m44[0m - [91merror[0m[90m TS2305: [0mModule '"../../types/firebaseTypes"' has no exported member 'FirebaseUser'.

    [7m5[0m import { FirebaseInvoice, FirebasePayment, FirebaseUser, FirebaseUserProfile, FirebasePaymentStatus, FirebasePaymentMethod, UserRole } from '../../types/firebaseTypes';
    [7m [0m [91m                                           ~~~~~~~~~~~~[0m
    [96msrc/tests/services/firebaseInvoiceService.test.ts[0m:[93m5[0m:[93m58[0m - [91merror[0m[90m TS2305: [0mModule '"../../types/firebaseTypes"' has no exported member 'FirebaseUserProfile'.

    [7m5[0m import { FirebaseInvoice, FirebasePayment, FirebaseUser, FirebaseUserProfile, FirebasePaymentStatus, FirebasePaymentMethod, UserRole } from '../../types/firebaseTypes';
    [7m [0m [91m                                                         ~~~~~~~~~~~~~~~~~~~[0m

Test Suites: 13 failed, 13 total
Tests:       0 total
Snapshots:   0 total
Time:        42.296 s
Ran all test suites.
